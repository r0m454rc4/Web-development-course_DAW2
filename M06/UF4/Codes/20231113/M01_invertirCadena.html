<!DOCTYPE html>
<html lang="ca">
  <!--
	document comunicacions amb backend amb Node i AJAX
	@author sergi grau, sergi.grau@fje.edu
	@version 1.0
	date 06.12.2015
	format del document UTF-8

	CHANGELOG
	06.12.2015
	document comunicacions amb backend amb Node i AJAX

	NOTES
	ORIGEN
    Desenvolupament Aplicacions Web. JesuÃ¯tes el Clot
	-->
  <head>
    <meta charset="utf-8" />
    <title>DAW2</title>
    <meta name="author" content="sergi grau" />
    <script type="text/javascript">
      let xhr;

      function inici() {
        xhr = new XMLHttpRequest();

        document.getElementById("cadena").onkeyup = function () {
          // onkeyup = each time I click a new key.
          ajaxFunction(this.value);
        };
      }

      function ajaxFunction(cadena) {
        // Callback.
        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4) {
            // If the user enters some keys.
            document.getElementById("cadenaInvertida").innerHTML =
              xhr.responseText; // xhr.responseText is because I know that is text.
          }
        };

        xhr.open("GET", "invertir?cadena=" + cadena, true); // The true is to say that is asynchronous.
        xhr.send(null); // xhr.send(null) is because the request doesn't have body.
      }

      window.addEventListener("load", inici, true);
    </script>
  </head>

  <body>
    <input type="text" name="cadena" id="cadena" value="" />
    <br />
    <label id="cadenaInvertida"></label>
  </body>
</html>
